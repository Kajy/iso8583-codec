package codec

import codec.FieldCodecs.{AN, ANS, LLVAR_N, N}
import codec.ISO8583Definition.WALLET_DATA_INFOS
import codec.types.WalletInfos46
import codec.types.field46.field1.types.RequestorId460102
import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.must.Matchers.convertToAnyMustWrapper
import scodec.bits.HexStringSyntax
import scodec.codecs._

class ISO8583CodecSpec extends AnyFlatSpec {

  "ISO8583" should "decode bytes" ignore {
    val hexString =
      hex"000000de0100763e46810ee1aa0110f5f1f7f0f0f3f0f0f1f0f0f0f0f0f0f800000000000000010000000000010008121656108574121656100812211208123389030100010006012345f0f8f5f0f0f0f1f0f0f0f0f3f2f9f4f2f3f1f0f0e385999460c8f0f1f1f2f3f4f5f6f7f8f9f0f1f2f3f4f5e685a2a3899540c195a8a396a695404040404040404040c195a8a396a6954040404040404040c6d92401020102040250030201040202060200070201080c000000000000110200120200220204097809780a01000000000000000000080095050000000000ffffffffffffffff".bits
    // val hexString = hex"000000de0100767e44810ee3a80110f5f4f7f3f9f5a2d3978987a7f3f9f7f4000000000000007000000000007000111314193261000000361769151932111326111113300700000806004798f0f0f0f0f8f7f4f3f0f2f2f8f8f9f3f8f4f3f0f0f0f3f6f2f6f9f2f7f0f0f0f3f1f1f1f7f4f9f1f1f8f8f4c1c6404040404040404040404040404040404040404040d4c1c4d9c9c4404040404040404040c6d9050106017328004801020102040250030202040203060200070201080c0000000000001102011202002202103303e3d7c33409e9c2d6c7f1c64040403502993606000000420af2f8f0f2f74040404040097809780a01000000000000000000ffffffffffffffff".bits

    val adviceRawMsg =
      hex"0x000000e10120f660440006f1a000000000420000000010f1f3f9f8f9f1f1f3f4f4f1f1f0f7f9f800000000000000010000000000010010071549180000000075125963479902c5d186d6c788f0f0c385c1f2c898a481a7d5e782929583f8f6e3a5f5f588a5c2a8a8c7a789c7f3958940404040404040404040404040c5f186f787c2d98282c34040404040e4e214d9c1f0f8f0f0f0f0f1f0f0f0d9c3f0f4f9f6f0f70013030202060200110200120210420588a6f8d18209780978000000000000000000000000000000000000000000000000000000000000000000000000000000000000".bits
    val rawMsgWithWalletInfos =
      hex"0x000000e80100f660440004e5a000000000420000000010f8f9f2f6f7f2f4f3f0f9f1f4f7f9f5f301000000000000010000000000010010080633520000000017350375070101c4d9f78192e692a6c181f797f3e7c4e396d99694f4d7a9f0a9c188d8e3f7a5c695e5f78888c4c240404040404040404040404040a4a2c4a9f5a7d389c6a34040404040e4e2001c011a020c0501100302731210f0f8f4f2f7f9f4f6f6f7f4f5f3f4f2f200130302020602001102011202304205f5a9c4f29209780978000000000000000000000000000000000000000000000000000000000000000000000000000000000000".bits

    val result = ISO8583Codec.CODEC.decode(rawMsgWithWalletInfos)

    println(result)
    1 mustBe 1
  }
}
